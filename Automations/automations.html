<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation Rules</title>
    <link rel="stylesheet" href="styles_auto.css">
    <link rel="stylesheet" href="media_queries.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <button class="theme-toggle" id="theme-toggle">Switch Mode ⏾</button>
        <!-- Sidebar -->
        <div class="sidebar hidden">
            <h2>Home Automator</h2>
            <ul>
                <li onclick="selectMenu(this, '../main/main.html')">Devices</li>
                <ul id="sidebarRoomList">
                    <!-- Room buttons will be injected here -->
                </ul>
                <li onclick="selectMenu(this, '../automations/automations.html')">Automations</li>
                <li onclick="selectMenu(this, '../settings/settings.html')">Settings</li>
            </ul>
            <button onclick="logout()">Logout</button>
        </div>

    <!-- Single Menu Button (Works in Both States) -->
    <button class="menu-btn" onclick="toggleSidebar()">☰</button>
    <div class="main-container">
        <h1>Automation Rules</h1>
        <button id="addRuleBtn">Add New Rule</button>
        
        <div class="rules-container" id="rulesList">

        </div>
    </div>

    <div class="popup-overlay" id="rulePopup">
        <div class="popup">
            <div class="popup-content">
                <span class="close">&times;</span>
                <h2>Create Automation Rule</h2>
                
                <label for="sensor">IF</label>
                <select id="sensor" onchange="toggleTimeFields()">
                    <option value="" disabled selected>Select a trigger</option>
                    <option value="temperature">Temperature</option>
                    <option value="humidity">Humidity</option>
                    <option value="time">Time Of Day</option>
                </select>
                
                <label for="condition">IS</label>
                <select id="condition">
                    <option value="" disabled selected>Select a condition</option>
                    <option value="greater">More than</option>
                    <option value="less">Less than</option>
                    <option value="equal">Exactly</option>
                </select>
                
                <input type="number" id="value" placeholder="Enter value">

                <div id="time_fields" style="display: none;">
                    <label for="condition_time">Select Time:</label>
                    <input type="time" id="condition_time" name="condition_time">
                
                </div>
    
                <label for="device">THEN</label>
                <select id="device">
                </select>
    
                <!-- ON/OFF Control -->
                <div id="onOffControl" class="device-control">
                    <label for="onOff">Action</label>
                    <select id="onOff">
                        <option value="on">Turn On</option>
                        <option value="off">Turn Off</option>
                    </select>
                </div>
    
                <!-- Speed Control (For Fan, Dimmer, etc.) -->
                <div id="speedControl" class="device-control">
                    <label for="speed">Speed</label>
                    <input type="number" id="speed" min="1" max="5" placeholder="Set Speed (1-5)">
                </div>
    
                <!-- AC Control -->
                <div id="acControl" class="device-control">
                    <label for="acMode">Mode</label>
                    <select id="acMode">
                        <option value="cool">Cool</option>
                        <option value="hot">Heat</option>
                        <option value="fan">Fan Only</option>
                    </select>
    
                    <label for="acTemp">Temperature</label>
                    <input type="number" id="acTemp" min="16" max="30" placeholder="Set Temperature (°C)">
    
                    <label for="acFanSpeed">Power</label>
                    <select id="acPower">
                        <option value="on">ON</option>
                        <option value="off">OFF</option>
                    </select>
                </div>
    
                <button id="saveRule">Save Rule</button>
            </div>
        </div>
    </div>

    <script src="script_auto.js"></script>
</body>
</html>
